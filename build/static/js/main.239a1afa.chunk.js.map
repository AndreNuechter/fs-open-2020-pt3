{"version":3,"sources":["components/Input.js","components/Search.js","components/EntryAdditionForm.js","components/Entries.js","components/Toast.js","services/dbService.js","index.js"],"names":["Input","label","value","changeHandler","style","display","onChange","Search","search","EntryAdditionForm","submitHandler","newName","nameChangeHandler","newNumber","numberChangeHandler","onSubmit","Entry","name","number","id","deleteHandler","width","justifyContent","onClick","Entries","matched","map","key","Toast","msg","cls","className","baseURL","axios","get","then","data","entry","post","res","put","delete","App","useState","persons","setPersons","setNewName","setNewNumber","setMatched","setSearch","setMsg","setCls","setToast","text","type","setTimeout","useEffect","dbService","cb","toLowerCase","includes","filter","target","event","person","find","window","confirm","p","catch","err","console","error","preventDefault","str","ReactDOM","render","document","getElementById"],"mappings":"0NAOeA,EALD,SAAC,GAAD,IAAGC,EAAH,EAAGA,MAAOC,EAAV,EAAUA,MAAOC,EAAjB,EAAiBA,cAAjB,OAAqC,+BAC9CF,EACD,2BAAOG,MAAO,CAAEC,QAAS,SAAWH,MAAOA,EAAOI,SAAUH,MCIjDI,EALA,SAAC,GAAD,IAAGC,EAAH,EAAGA,OAAQL,EAAX,EAAWA,cAAX,OAA+B,kBAAC,EAAD,CAC1CF,MAAM,UACNC,MAAOM,EACPL,cAAeA,KCkBJM,EArBW,SAAC,GAAD,IACtBC,EADsB,EACtBA,cACAC,EAFsB,EAEtBA,QACAC,EAHsB,EAGtBA,kBACAC,EAJsB,EAItBA,UACAC,EALsB,EAKtBA,oBALsB,OAMpB,0BAAMC,SAAUL,GACd,4CACA,kBAAC,EAAD,CACIT,MAAM,QACNC,MAAOS,EACPR,cAAeS,IACnB,kBAAC,EAAD,CACIX,MAAM,UACNC,MAAOW,EACPV,cAAeW,IACnB,6BACI,0CClBNE,EAAQ,SAAC,GAAD,IAAGC,EAAH,EAAGA,KAAMC,EAAT,EAASA,OAAQC,EAAjB,EAAiBA,GAAIC,EAArB,EAAqBA,cAArB,OAAyC,yBACnDhB,MAAO,CACHiB,MAAO,QACPhB,QAAS,OACTiB,eAAgB,kBAEnBL,EANkD,MAMzCC,EACV,4BAAQK,QAASH,EAAcD,IAA/B,YAMWK,EAJC,SAAC,GAAD,IAAGC,EAAH,EAAGA,QAASL,EAAZ,EAAYA,cAAZ,OAAgCK,EAAQC,KAAI,gBAAGT,EAAH,EAAGA,KAAMC,EAAT,EAASA,OAAQC,EAAjB,EAAiBA,GAAjB,OACxD,kBAAC,EAAD,CAAOF,KAAMA,EAAMC,OAAQA,EAAQC,GAAIA,EAAIQ,IAAKR,EAAIC,cAAeA,QCNxDQ,EAJD,SAAC,GAAkB,IAAhBC,EAAe,EAAfA,IAAKC,EAAU,EAAVA,IAClB,OAAOD,GAAO,yBAAKE,UAAS,UAAKD,EAAL,WAAmBD,I,gBCD7CG,EAAU,eAED,aAEP,OAAOC,IACFC,IAAIF,GACJG,MAAK,qBAAGC,SAJN,WAMNC,GACD,OAAOJ,IACFK,KAAKN,EAASK,GACdF,MAAK,SAAAI,GAAG,OAAIA,EAAIH,SATd,WAWJjB,EAAIkB,GACP,OAAOJ,IACFO,IADE,UACKR,EADL,YACgBb,GAAMkB,GACxBF,MAAK,SAAAI,GAAG,OAAIA,EAAIH,SAdd,WAgBJjB,GACH,OAAOc,IACFQ,OADE,UACQT,EADR,YACmBb,IACrBgB,MAAK,SAAAI,GAAG,OAAIA,EAAIH,SCVvBM,G,MAAM,WAAO,IAAD,EACgBC,mBAAS,IADzB,mBACPC,EADO,KACEC,EADF,OAEgBF,mBAAS,IAFzB,mBAEPhC,EAFO,KAEEmC,EAFF,OAGoBH,mBAAS,IAH7B,mBAGP9B,EAHO,KAGIkC,EAHJ,OAIgBJ,mBAAS,IAJzB,mBAIPlB,EAJO,KAIEuB,EAJF,OAKcL,mBAAS,IALvB,mBAKPnC,EALO,KAKCyC,EALD,OAMQN,mBAAS,IANjB,mBAMPd,EANO,KAMFqB,EANE,OAOQP,mBAAS,IAPjB,mBAOPb,EAPO,KAOFqB,EAPE,KASRC,EAAW,SAACC,EAAMC,GACpBJ,EAAOG,GACPF,EAAOG,GACPC,YAAW,kBAAML,EAAO,MAAK,MAGjCM,qBACI,WACIC,IAEKtB,MAAK,SAAAC,GAAI,OAAIS,EAAWT,QAC9B,IAGPoB,qBACI,WACI,IA7BWtD,EA6BLwD,GA7BKxD,EA6BeM,EA7BN,qBAAGS,KAC9B0C,cACAC,SAAS1D,EAAMyD,iBA4BRX,EAAW,YAAIJ,EAAQiB,OAAOH,OAElC,CAAClD,EAAQoC,IAmDb,OACI,oCACI,yCAEA,kBAAC,EAAD,CAAOf,IAAKA,EAAKC,IAAKA,IAEtB,kBAAC,EAAD,CACItB,OAAQA,EACRL,cAAe,gBAAG2D,EAAH,EAAGA,OAAH,OAAgBb,EAAUa,EAAO5D,UAEpD,kBAAC,EAAD,CACIS,QAASA,EACTC,kBAAmB,gBAAGkD,EAAH,EAAGA,OAAH,OAAgBhB,EAAWgB,EAAO5D,QACrDW,UAAWA,EACXC,oBAAqB,gBAAGgD,EAAH,EAAGA,OAAH,OAAgBf,EAAae,EAAO5D,QACzDQ,cA/DU,SAACqD,GACnB,IAAMC,EAASpB,EAAQqB,MAAK,qBAAGhD,OAAoBN,KAC/CqD,EACIE,OAAOC,QAAP,mBAA2BxD,EAA3B,uDACA8C,EACYO,EAAO7C,GAAI,CAAEF,KAAMN,EAASO,OAAQL,IAC3CsB,MAAK,SAAAI,GAAG,OAAIM,EAAWD,EAAQlB,KAAI,SAAA0C,GAAC,OAAIA,EAAEjD,KAAO6C,EAAO7C,GAAKoB,EAAM6B,SACnEC,OAAM,SAACC,GACJC,QAAQC,MAAMF,GACdlB,EAAS,wCAAyC,SAClDP,EAAWD,EAAQiB,QAAO,SAAAO,GAAC,OAAIA,EAAEjD,KAAO6C,EAAO7C,UAGlDR,GAAWE,EAGpB4C,EACU,CAAExC,KAAMN,EAASO,OAAQL,IAC9BsB,MAAK,SAACI,GACHM,EAAW,GAAD,mBAAKD,GAAL,CAAcL,KACxBa,EAAS,gBAAiB,cAE7BiB,OAAM,SAACC,GACJC,QAAQC,MAAMF,GACdlB,EAAS,8DAAgE,YAVjFA,EAAS,uCAAwC,SAarDN,EAAW,IACXC,EAAa,IACbgB,EAAMU,oBAoCF,uCAEA,kBAAC,EAAD,CAAShD,QAASA,EAASL,cAnCb,SAAAD,GAAE,OAAI,WACxB,IAAMuD,EAAG,qDAAiD9B,EAAQqB,MAAK,SAAAG,GAAC,OAAIA,EAAEjD,KAAOA,KAAIF,MACrFiD,OAAOC,QAAQO,IACfjB,EACYtC,GACPgB,MAAK,WACFU,EAAWD,EAAQiB,QAAO,SAAAO,GAAC,OAAIA,EAAEjD,KAAOA,MACxCiC,EAAS,kBAAmB,cAE/BiB,OAAM,SAACC,GACJC,QAAQC,MAAMF,GACdlB,EAAS,2DAA4D,mBA6BzFuB,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,W","file":"static/js/main.239a1afa.chunk.js","sourcesContent":["import React from 'react'\n\nconst Input = ({ label, value, changeHandler }) => <label>\n    {label}\n    <input style={{ display: 'block' }} value={value} onChange={changeHandler} />\n</label>\n\nexport default Input","import React from 'react'\nimport Input from './Input'\n\nconst Search = ({ search, changeHandler }) => <Input\n    label=\"Search:\"\n    value={search}\n    changeHandler={changeHandler} />\n\nexport default Search","import React from 'react'\nimport Input from './Input'\n\nconst EntryAdditionForm = ({\n    submitHandler,\n    newName,\n    nameChangeHandler,\n    newNumber,\n    numberChangeHandler\n}) => <form onSubmit={submitHandler}>\n        <h2>Add a number</h2>\n        <Input\n            label=\"Name:\"\n            value={newName}\n            changeHandler={nameChangeHandler} />\n        <Input\n            label=\"Number:\"\n            value={newNumber}\n            changeHandler={numberChangeHandler} />\n        <div>\n            <button>add</button>\n        </div>\n    </form>\n\nexport default EntryAdditionForm","import React from 'react'\n\nconst Entry = ({ name, number, id, deleteHandler }) => <div\n    style={{\n        width: '400px',\n        display: 'flex',\n        justifyContent: 'space-between'\n    }}>\n    {name} | {number}\n    <button onClick={deleteHandler(id)}>Delete</button>\n</div>\nconst Entries = ({ matched, deleteHandler }) => matched.map(({ name, number, id }) => (\n    <Entry name={name} number={number} id={id} key={id} deleteHandler={deleteHandler} />\n))\n\nexport default Entries","import React from 'react'\n\nconst Toast = ({ msg, cls }) => {\n    return msg && <div className={`${cls} toast`}>{msg}</div>\n}\n\nexport default Toast","import axios from 'axios'\n\nconst baseURL = '/api/persons'\n\nexport default {\n    get() {\n        return axios\n            .get(baseURL)\n            .then(({ data }) => data)\n    },\n    post(entry) {\n        return axios\n            .post(baseURL, entry)\n            .then(res => res.data)\n    },\n    update(id, entry) {\n        return axios\n            .put(`${baseURL}/${id}`, entry)\n            .then(res => res.data)\n    },\n    delete(id) {\n        return axios\n            .delete(`${baseURL}/${id}`)\n            .then(res => res.data)\n    }\n}","import ReactDOM from 'react-dom'\nimport React, { useEffect, useState } from 'react'\nimport Search from './components/Search'\nimport EntryAdditionForm from './components/EntryAdditionForm'\nimport Entries from './components/Entries'\nimport Toast from './components/Toast'\nimport dbService from './services/dbService'\nimport './style.css'\n\nconst filterCallback = value => ({ name }) => name\n    .toLowerCase()\n    .includes(value.toLowerCase())\n\nconst App = () => {\n    const [persons, setPersons] = useState([])\n    const [newName, setNewName] = useState('')\n    const [newNumber, setNewNumber] = useState('')\n    const [matched, setMatched] = useState([])\n    const [search, setSearch] = useState('')\n    const [msg, setMsg] = useState('')\n    const [cls, setCls] = useState('')\n\n    const setToast = (text, type) => {\n        setMsg(text)\n        setCls(type)\n        setTimeout(() => setMsg(''), 5000)\n    }\n\n    useEffect(\n        () => {\n            dbService\n                .get()\n                .then(data => setPersons(data))\n        }, []\n    )\n\n    useEffect(\n        () => {\n            const cb = filterCallback(search)\n            setMatched([...persons.filter(cb)])\n        },\n        [search, persons]\n    )\n\n    const submitHandler = (event) => {\n        const person = persons.find(({ name }) => name === newName)\n        if (person) {\n            if (window.confirm(`The name ${newName} is already in storage. Do you want to update it?`)) {\n                dbService\n                    .update(person.id, { name: newName, number: newNumber })\n                    .then(res => setPersons(persons.map(p => p.id === person.id ? res : p)))\n                    .catch((err) => {\n                        console.error(err)\n                        setToast('The contact has already been deleted.', 'error')\n                        setPersons(persons.filter(p => p.id !== person.id))\n                    })\n            }\n        } else if (!(newName && newNumber)) {\n            setToast('We need you to input name AND number', 'error')\n        } else {\n            dbService\n                .post({ name: newName, number: newNumber })\n                .then((res) => {\n                    setPersons([...persons, res])\n                    setToast('Contact saved', 'success')\n                })\n                .catch((err) => {\n                    console.error(err)\n                    setToast('Something went wrong on our side. The contact wasn\\'t saved.', 'error')\n                })\n        }\n        setNewName('')\n        setNewNumber('')\n        event.preventDefault()\n    }\n\n    const deleteHandler = id => () => {\n        const str = `Do you really want to delete the entry for ${persons.find(p => p.id === id).name}`\n        if (window.confirm(str)) {\n            dbService\n                .delete(id)\n                .then(() => {\n                    setPersons(persons.filter(p => p.id !== id))\n                    setToast('Contact deleted', 'success')\n                })\n                .catch((err) => {\n                    console.error(err)\n                    setToast('Something went wrong on our side. Please try again later', 'error')\n                })\n        }\n    }\n\n    return (\n        <>\n            <h1>Phonebook</h1>\n\n            <Toast msg={msg} cls={cls} />\n\n            <Search\n                search={search}\n                changeHandler={({ target }) => setSearch(target.value)} />\n\n            <EntryAdditionForm\n                newName={newName}\n                nameChangeHandler={({ target }) => setNewName(target.value)}\n                newNumber={newNumber}\n                numberChangeHandler={({ target }) => setNewNumber(target.value)}\n                submitHandler={submitHandler} />\n\n            <h2>Entries</h2>\n\n            <Entries matched={matched} deleteHandler={deleteHandler} />\n        </>\n    )\n}\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}
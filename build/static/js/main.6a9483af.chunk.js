(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{17:function(e,n,t){e.exports=t(40)},39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var a=t(6),r=t(2),c=t(16),u=t.n(c),o=t(0),l=t.n(o),i=function(e){var n=e.label,t=e.value,a=e.changeHandler;return l.a.createElement("label",null,n,l.a.createElement("input",{style:{display:"block"},value:t,onChange:a}))},s=function(e){var n=e.search,t=e.changeHandler;return l.a.createElement(i,{label:"Search:",value:n,changeHandler:t})},d=function(e){var n=e.submitHandler,t=e.newName,a=e.nameChangeHandler,r=e.newNumber,c=e.numberChangeHandler;return l.a.createElement("form",{onSubmit:n},l.a.createElement("h2",null,"Add a number"),l.a.createElement(i,{label:"Name:",value:t,changeHandler:a}),l.a.createElement(i,{label:"Number:",value:r,changeHandler:c}),l.a.createElement("div",null,l.a.createElement("button",null,"add")))},m=function(e){var n=e.name,t=e.number,a=e.id,r=e.deleteHandler;return l.a.createElement("div",{style:{width:"400px",display:"flex",justifyContent:"space-between"}},n," | ",t,l.a.createElement("button",{onClick:r(a)},"Delete"))},f=function(e){var n=e.matched,t=e.deleteHandler;return n.map((function(e){var n=e.name,a=e.number,r=e.id;return l.a.createElement(m,{name:n,number:a,id:r,key:r,deleteHandler:t})}))},b=function(e){var n=e.msg,t=e.cls;return n&&l.a.createElement("div",{className:"".concat(t," toast")},n)},h=t(4),v=t.n(h),p="/api/persons",E=function(){return v.a.get(p).then((function(e){return e.data}))},g=function(e){return v.a.post(p,e).then((function(e){return e.data}))},j=function(e,n){return v.a.put("".concat(p,"/").concat(e),n).then((function(e){return e.data}))},O=function(e){return v.a.delete("".concat(p,"/").concat(e)).then((function(e){return e.data}))},w=(t(39),function(){var e=Object(o.useState)([]),n=Object(r.a)(e,2),t=n[0],c=n[1],u=Object(o.useState)(""),i=Object(r.a)(u,2),m=i[0],h=i[1],v=Object(o.useState)(""),p=Object(r.a)(v,2),w=p[0],H=p[1],y=Object(o.useState)([]),C=Object(r.a)(y,2),S=C[0],k=C[1],N=Object(o.useState)(""),D=Object(r.a)(N,2),T=D[0],x=D[1],A=Object(o.useState)(""),J=Object(r.a)(A,2),L=J[0],B=J[1],F=Object(o.useState)(""),I=Object(r.a)(F,2),P=I[0],W=I[1],q=function(e,n){B(e),W(n),setTimeout((function(){return B("")}),5e3)};Object(o.useEffect)((function(){E().then((function(e){return c(e)}))}),[]),Object(o.useEffect)((function(){var e,n=(e=T,function(n){return n.name.toLowerCase().includes(e.toLowerCase())});k(Object(a.a)(t.filter(n)))}),[T,t]);return l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"Phonebook"),l.a.createElement(b,{msg:L,cls:P}),l.a.createElement(s,{search:T,changeHandler:function(e){var n=e.target;return x(n.value)}}),l.a.createElement(d,{newName:m,nameChangeHandler:function(e){var n=e.target;return h(n.value)},newNumber:w,numberChangeHandler:function(e){var n=e.target;return H(n.value)},submitHandler:function(e){e.preventDefault();var n=t.find((function(e){return e.name===m}));if(n)window.confirm("The name ".concat(m," is already in storage. Do you want to update it?"))&&j(n.id,{name:m,number:w}).then((function(e){return c(t.map((function(t){return t.id===n.id?e:t})))})).catch((function(e){console.error(e),404===e.response.status?(q("The contact has already been deleted.","error"),c(t.filter((function(e){return e.id!==n.id})))):q(e.response.data.error,"error")}));else{if(!m||!w)return void q("We need you to input name AND number","error");if(m.length<3||w.length<8)return void q("The name must be at least 3 characters long and the number must be at least 8 characters long.","error");g({name:m,number:w}).then((function(e){c([].concat(Object(a.a)(t),[e])),q("Contact saved","success")})).catch((function(e){console.error(e),q(e.response.data.error,"error")}))}h(""),H("")}}),l.a.createElement("h2",null,"Entries"),l.a.createElement(f,{matched:S,deleteHandler:function(e){return function(){var n="Do you really want to delete the entry for ".concat(t.find((function(n){return n.id===e})).name);window.confirm(n)&&O(e).then((function(){c(t.filter((function(n){return n.id!==e}))),q("Contact deleted","success")})).catch((function(e){console.error(e),q(e.response.data.error,"error")}))}}}))});u.a.render(l.a.createElement(w,null),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.6a9483af.chunk.js.map
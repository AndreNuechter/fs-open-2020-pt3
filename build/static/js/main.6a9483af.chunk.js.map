{"version":3,"sources":["components/Input.js","components/Search.js","components/EntryAdditionForm.js","components/Entries.js","components/Toast.js","services/dbService.js","index.js"],"names":["Input","label","value","changeHandler","style","display","onChange","Search","search","EntryAdditionForm","submitHandler","newName","nameChangeHandler","newNumber","numberChangeHandler","onSubmit","Entry","name","number","id","deleteHandler","width","justifyContent","onClick","Entries","matched","map","key","Toast","msg","cls","className","baseURL","axios","get","then","data","entry","post","res","put","delete","App","useState","persons","setPersons","setNewName","setNewNumber","setMatched","setSearch","setMsg","setCls","setToast","text","type","setTimeout","useEffect","dbService","cb","toLowerCase","includes","filter","target","event","preventDefault","person","find","window","confirm","p","catch","err","console","error","response","status","length","str","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.6a9483af.chunk.js","sourcesContent":["import React from 'react'\n\nconst Input = ({ label, value, changeHandler }) => <label>\n    {label}\n    <input style={{ display: 'block' }} value={value} onChange={changeHandler} />\n</label>\n\nexport default Input","import React from 'react'\nimport Input from './Input'\n\nconst Search = ({ search, changeHandler }) => <Input\n    label=\"Search:\"\n    value={search}\n    changeHandler={changeHandler} />\n\nexport default Search","import React from 'react'\nimport Input from './Input'\n\nconst EntryAdditionForm = ({\n    submitHandler,\n    newName,\n    nameChangeHandler,\n    newNumber,\n    numberChangeHandler\n}) => <form onSubmit={submitHandler}>\n        <h2>Add a number</h2>\n        <Input\n            label=\"Name:\"\n            value={newName}\n            changeHandler={nameChangeHandler} />\n        <Input\n            label=\"Number:\"\n            value={newNumber}\n            changeHandler={numberChangeHandler} />\n        <div>\n            <button>add</button>\n        </div>\n    </form>\n\nexport default EntryAdditionForm","import React from 'react'\n\nconst Entry = ({ name, number, id, deleteHandler }) => <div\n    style={{\n        width: '400px',\n        display: 'flex',\n        justifyContent: 'space-between'\n    }}>\n    {name} | {number}\n    <button onClick={deleteHandler(id)}>Delete</button>\n</div>\nconst Entries = ({ matched, deleteHandler }) => matched.map(({ name, number, id }) => (\n    <Entry name={name} number={number} id={id} key={id} deleteHandler={deleteHandler} />\n))\n\nexport default Entries","import React from 'react'\n\nconst Toast = ({ msg, cls }) => {\n    return msg && <div className={`${cls} toast`}>{msg}</div>\n}\n\nexport default Toast","import axios from 'axios'\n\nconst baseURL = '/api/persons'\n\nexport default {\n    get() {\n        return axios\n            .get(baseURL)\n            .then(({ data }) => data)\n    },\n    post(entry) {\n        return axios\n            .post(baseURL, entry)\n            .then(res => res.data)\n    },\n    update(id, entry) {\n        return axios\n            .put(`${baseURL}/${id}`, entry)\n            .then(res => res.data)\n    },\n    delete(id) {\n        return axios\n            .delete(`${baseURL}/${id}`)\n            .then(res => res.data)\n    }\n}","import ReactDOM from 'react-dom';\nimport React, { useEffect, useState } from 'react';\nimport Search from './components/Search';\nimport EntryAdditionForm from './components/EntryAdditionForm';\nimport Entries from './components/Entries';\nimport Toast from './components/Toast';\nimport dbService from './services/dbService';\nimport './style.css';\n\nconst filterCallback = value => ({ name }) => name\n    .toLowerCase()\n    .includes(value.toLowerCase());\n\nconst App = () => {\n    const [persons, setPersons] = useState([]);\n    const [newName, setNewName] = useState('');\n    const [newNumber, setNewNumber] = useState('');\n    const [matched, setMatched] = useState([]);\n    const [search, setSearch] = useState('');\n    const [msg, setMsg] = useState('');\n    const [cls, setCls] = useState('');\n\n    const setToast = (text, type) => {\n        setMsg(text);\n        setCls(type);\n        setTimeout(() => setMsg(''), 5000);\n    };\n\n    useEffect(\n        () => {\n            dbService\n                .get()\n                .then(data => setPersons(data));\n        }, []\n    );\n\n    useEffect(\n        () => {\n            const cb = filterCallback(search);\n            setMatched([...persons.filter(cb)]);\n        },\n        [search, persons]\n    );\n\n    const submitHandler = (event) => {\n        event.preventDefault();\n\n        const person = persons.find(({ name }) => name === newName);\n        if (person) {\n            if (window.confirm(`The name ${newName} is already in storage. Do you want to update it?`)) {\n                dbService\n                    .update(person.id, { name: newName, number: newNumber })\n                    .then(res => setPersons(persons.map(p => p.id === person.id ? res : p)))\n                    .catch((err) => {\n                        console.error(err);\n                        if (err.response.status === 404) {\n                            setToast('The contact has already been deleted.', 'error');\n                            setPersons(persons.filter(p => p.id !== person.id));\n                        } else {\n                            setToast(err.response.data.error, 'error');\n                        }\n                    });\n            }\n        } else if (!(newName && newNumber)) {\n            setToast('We need you to input name AND number', 'error');\n            return;\n        } else if (newName.length < 3 || newNumber.length < 8) {\n            setToast('The name must be at least 3 characters long and the number must be at least 8 characters long.', 'error');\n            return;\n        } else {\n            dbService\n                .post({ name: newName, number: newNumber })\n                .then((res) => {\n                    setPersons([...persons, res]);\n                    setToast('Contact saved', 'success');\n                })\n                .catch((err) => {\n                    console.error(err);\n                    setToast(err.response.data.error, 'error');\n                });\n        }\n        setNewName('');\n        setNewNumber('');\n    };\n\n    const deleteHandler = id => () => {\n        const str = `Do you really want to delete the entry for ${persons.find(p => p.id === id).name}`;\n        if (window.confirm(str)) {\n            dbService\n                .delete(id)\n                .then(() => {\n                    setPersons(persons.filter(p => p.id !== id));\n                    setToast('Contact deleted', 'success');\n                })\n                .catch((err) => {\n                    console.error(err);\n                    setToast(err.response.data.error, 'error');\n                });\n        }\n    };\n\n    return (\n        <>\n            <h1>Phonebook</h1>\n\n            <Toast msg={msg} cls={cls} />\n\n            <Search\n                search={search}\n                changeHandler={({ target }) => setSearch(target.value)} />\n\n            <EntryAdditionForm\n                newName={newName}\n                nameChangeHandler={({ target }) => setNewName(target.value)}\n                newNumber={newNumber}\n                numberChangeHandler={({ target }) => setNewNumber(target.value)}\n                submitHandler={submitHandler} />\n\n            <h2>Entries</h2>\n\n            <Entries matched={matched} deleteHandler={deleteHandler} />\n        </>\n    );\n};\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}